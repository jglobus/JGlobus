<!--
  GridShib Identity Provider Metadata

  To customize this IdP metadata file:
  1) insert IdP providerId
  2) insert CA signing cert
  3) insert value of shibmd:Scope element
  4) insert IdP SSL cert
  5) insert AA endpoint location
  6) construct saml:Attribute elements (optional)
  7) edit organizational metadata
  8) sign the md:EntityDescriptor element

  The md:EntitiesDescriptor element is commented out since an
  IdP will typically distribute a signed md:EntityDescriptor
  element to an SP.  The SP will then insert that element into
  an existing metadata file.
-->

<!--
<md:EntitiesDescriptor
  xmlns:md="urn:oasis:names:tc:SAML:2.0:metadata"
  xmlns:saml="urn:oasis:names:tc:SAML:2.0:assertion"
  xmlns:shibmd="urn:mace:shibboleth:metadata:1.0"
  xmlns:ds="http://www.w3.org/2000/09/xmldsig#"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="urn:oasis:names:tc:SAML:2.0:metadata ../schemas/saml-schema-metadata-2.0.xsd urn:mace:shibboleth:metadata:1.0 ../schemas/shibboleth-metadata-1.0.xsd http://www.w3.org/2000/09/xmldsig# ../schemas/xmldsig-core-schema.xsd"
  Name="[INSERT GROUP NAME HERE]"
  validUntil="2010-01-01T00:00:00Z">
-->

  <!--
    This EntityDescriptor element describes a Shibboleth IdP
    that supports a standalone attribute requester (such as a
    GridShib grid service provider).

    The entityID attribute of the EntityDescriptor element
    is the IdP providerId.
  -->
  <md:EntityDescriptor
    xmlns:md="urn:oasis:names:tc:SAML:2.0:metadata"
    xmlns:shibmd="urn:mace:shibboleth:metadata:1.0"
    xmlns:ds="http://www.w3.org/2000/09/xmldsig#"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    entityID="https://idp.example.org/shibboleth">

    <!--
      Insert a ds:Signature element here.  Typically,
      IdP metadata is signed for integrity protection.
    -->

    <md:Extensions>
      <!--
        The cert of the CA that issued the SSL cert to the
        IdP is inserted here (base64 encoded).  If the SSL cert
        is self-signed, this element either contains that cert
        or may be omitted altogether.
      -->
      <shibmd:KeyAuthority VerifyDepth="1">
        <!-- IdP root CA -->
        <ds:KeyInfo>
          <ds:X509Data>
            <ds:X509Certificate>
MIIB+jCCAWMCBEKC84IwDQYJKoZIhvcNAQEEBQAwRDELMAkGA1UEBhMCVVMxFDAS
BgNVBAoTC2V4YW1wbGUub3JnMR8wHQYDVQQDExZzaGliYm9sZXRoLmV4YW1wbGUu
b3JnMB4XDTA1MDUxMjA2MTExNFoXDTA2MDUxMjA2MTExNFowRDELMAkGA1UEBhMC
VVMxFDASBgNVBAoTC2V4YW1wbGUub3JnMR8wHQYDVQQDExZzaGliYm9sZXRoLmV4
YW1wbGUub3JnMIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQC6ws2Y+wdcm/mM
l6jaCJN+EmlztXCv3rM+zwYBizeDO7Yt4J3fQECu9QcRZlpkcXXrGbGtO0MOrcga
ekWgcKjw+XIvLyH1Wf7xpIdWDiTg+Vo1gFTZ/eHYe5Qb7LvonzuL4V+ndjacX8zN
Pq8GG1BzTb2RoaDG58FScxCgd/d8PwIDAQABMA0GCSqGSIb3DQEBBAUAA4GBALOH
4jNn7MKzzB3ZS+ejK+UXYqhpIf/80UQabWSLTl7gaBKw+5xT+FsHtIoSLxIl6BHc
VwED+4Do74Dk2BG5nit25YL6zaMRC74aJfslR4Y3aqZbViA1f05N6QbWNlXxgjfh
MuFe/k9aY4g/N6YbHhg2Lk7CcKmp/mW7x7MeAGFk
            </ds:X509Certificate>
          </ds:X509Data>
        </ds:KeyInfo>
      </shibmd:KeyAuthority>
    </md:Extensions>

    <md:AttributeAuthorityDescriptor
      protocolSupportEnumeration="urn:oasis:names:tc:SAML:1.1:protocol">

      <md:Extensions>
        <!--
          This is a Shibboleth extension to express attribute scope rules.
          Although the content of this element looks like a DNS domain, it
          is in fact case sensitive.  Note: Depending on how scoped attributes
          are stored, it may be necessary to specify two shibmd:Scope elements,
          one lowercase and the other uppercase.
        -->
        <shibmd:Scope regexp="false">scope.edu</shibmd:Scope>
      </md:Extensions>

      <!--
        The certificate used by the IdP for SSL server
        authentication is inserted here (base64 encoded).
        If there is a KeyAuthority element above, you may use a
        ds:KeyName element in lieu of the ds:X509Certificate
        element below.  If used, the value of the ds:KeyName
        element is the CN of the subject DN of the SSL cert.

        It is assumed that a single cert is used for both
        SSL and signing.  If this is not the case, separate
        KeyAuthority and KeyDescriptor elements are required.
        [Currently, Shibboleth AAs do not sign assertions.]
      -->
      <md:KeyDescriptor use="signing">
        <!-- IdP SSL server cert -->
        <ds:KeyInfo>
          <ds:X509Data>
            <ds:X509Certificate>
MIIB+jCCAWMCBEKC84IwDQYJKoZIhvcNAQEEBQAwRDELMAkGA1UEBhMCVVMxFDAS
BgNVBAoTC2V4YW1wbGUub3JnMR8wHQYDVQQDExZzaGliYm9sZXRoLmV4YW1wbGUu
b3JnMB4XDTA1MDUxMjA2MTExNFoXDTA2MDUxMjA2MTExNFowRDELMAkGA1UEBhMC
VVMxFDASBgNVBAoTC2V4YW1wbGUub3JnMR8wHQYDVQQDExZzaGliYm9sZXRoLmV4
YW1wbGUub3JnMIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQC6ws2Y+wdcm/mM
l6jaCJN+EmlztXCv3rM+zwYBizeDO7Yt4J3fQECu9QcRZlpkcXXrGbGtO0MOrcga
ekWgcKjw+XIvLyH1Wf7xpIdWDiTg+Vo1gFTZ/eHYe5Qb7LvonzuL4V+ndjacX8zN
Pq8GG1BzTb2RoaDG58FScxCgd/d8PwIDAQABMA0GCSqGSIb3DQEBBAUAA4GBALOH
4jNn7MKzzB3ZS+ejK+UXYqhpIf/80UQabWSLTl7gaBKw+5xT+FsHtIoSLxIl6BHc
VwED+4Do74Dk2BG5nit25YL6zaMRC74aJfslR4Y3aqZbViA1f05N6QbWNlXxgjfh
MuFe/k9aY4g/N6YbHhg2Lk7CcKmp/mW7x7MeAGFk
            </ds:X509Certificate>
          </ds:X509Data>
        </ds:KeyInfo>
      </md:KeyDescriptor>

      <!--
        The AA endpoint location is inserted here.
      -->
      <md:AttributeService
        Binding="urn:oasis:names:tc:SAML:1.0:bindings:SOAP-binding"
        Location="https://idp.example.org:8443/shibboleth-idp/AA"/>

      <md:NameIDFormat>
        urn:oasis:names:tc:SAML:1.1:nameid-format:X509SubjectName
      </md:NameIDFormat>

      <!--
        Zero or more saml:Attribute elements are included here.
        (Since these elements are currently not used by grid
        service providers, they are more for documentation purposes
        than anything else.)  The enclosed saml:AttributeValue
        elements advertise the set of possible attribute values
        (assuming the values are enumerable).
      -->
      <saml:Attribute
        xmlns:saml="urn:oasis:names:tc:SAML:2.0:assertion"
        Name="urn:mace:dir:attribute-def:eduPersonAffiliation"
        NameFormat="urn:mace:shibboleth:1.0:attributeNamespace:uri">
        <saml:AttributeValue>member</saml:AttributeValue>
        <saml:AttributeValue>student</saml:AttributeValue>
        <saml:AttributeValue>faculty</saml:AttributeValue>
        <saml:AttributeValue>employee</saml:AttributeValue>
        <saml:AttributeValue>staff</saml:AttributeValue>
      </saml:Attribute>
      <saml:Attribute
        xmlns:saml="urn:oasis:names:tc:SAML:2.0:assertion"
        Name="urn:mace:dir:attribute-def:eduPersonPrincipalName"
        NameFormat="urn:mace:shibboleth:1.0:attributeNamespace:uri">
          <saml:AttributeValue />
        </saml:Attribute>

    </md:AttributeAuthorityDescriptor>

    <!--
      Organizational metadata (human readable).
    -->
    <md:Organization>
      <md:OrganizationName xml:lang="en">
        organizationName
      </md:OrganizationName>
      <md:OrganizationDisplayName xml:lang="en">
        organizationDisplayName
      </md:OrganizationDisplayName>
      <md:OrganizationURL xml:lang="en">
        http://organization.example.org
      </md:OrganizationURL>
    </md:Organization>
    <md:ContactPerson contactType="administrative">
      <md:SurName>admin</md:SurName>
      <md:EmailAddress>admin@example.org</md:EmailAddress>
    </md:ContactPerson>
    <md:ContactPerson contactType="technical">
      <md:SurName>technical</md:SurName>
      <md:EmailAddress>technical@example.org</md:EmailAddress>
    </md:ContactPerson>

  </md:EntityDescriptor>

<!--
</md:EntitiesDescriptor>
-->
